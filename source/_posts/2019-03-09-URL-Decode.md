---
title: URL字符串解码
date: 2019-03-09 14:24:41
tags: [CPP,LeetCode]
categories: 数据结构与算法
top:
---
# 题目描述
在URL字符串中，如果百分号%后面跟了两个十六进制数字，那么它表示相应ASCII值所对应的字符，如`%2F`表示`'/'`，`%32`表示`'2'`。%编码还可以进行嵌套，如`%%32F`可以解码成`%2F`，再进一步解码成`/`。如果没有任何百分号后面跟的是两个十六进制数字则无法再进行解码。

现在有一系列的URL，希望你帮忙进行百分号解码，直到无法再解码为止。

<!-- more -->

# 输入描述
> 第一行一个正整数T(T<=10)，表示T个测试样例；
> 对于每个测试样例，输入字符串s，字符串不包含空白符且长度小于100,000。
> 有部分测试样例的字符串长度<=1,000.

# 输出描述
> 输出T行，每行一个字符串，表示解码后的结果。

示例1
输入
```
1
%%32F
```
输出
```
/
```

# C++解决方案
我这里写了一个C++的URL解码方案，主要思路是借用了一个栈，从字符串后边开始遍历，如果不是`%`则放入栈中，遇到`%`则从栈顶取出两个字符，将这个十六进制的字符串转换成ASCII码后又放入栈顶。继续遍历，直到输入字符串的头部，最后将栈中字符输出即为所得字符串。

{% ghcode https://github.com/fuhailin/show-me-cpp-code/blob/master/algorithm/URL_Decode.cpp %}

其中`string hex2ascii(string hex)`为十六进制的字符串转换成ASCII码的方法，两个十六进制的字符对应一个ASCII码。其中使用了`C 库函数 - strtol()`，C 库函数 ``long int strtol(const char *str, char **endptr, int base)`` 把参数 str 所指向的字符串根据给定的 base 转换为一个长整数（类型为 long int 型），base 必须介于 2 和 36（包含）之间表示多少进制，或者是特殊值 0。

试了好几个例子都没问题，但是在牛客网上提交却是0%通过，很奇怪，还希望有缘人看到这个后能指出错误。
