---
title: C/C++中结构体的定义以及实例化
date: 2019-01-25 20:58:02
tags: [C++,C]
categories: 数据结构与算法
top:
description: 如何在C/C++中定义结构体，以及进行实例化
---

# Difference between C structures and C++ structures
在C\++中，struct和class基本上是一个东西，除了struct默认是public权限，class默认是private权限。
在C和C++结构体之间还有重要的区别：
 1. 结构体中的成员函数：在C的结构体中不能有成员函数，在C++的结构体中可以有成员函数和数据成员。
 2. 直接初始化：在C中不能直接初始化结构体的数据成员，但是在C++中可以。
```c
// C program to demonstrate that direct member initialization is not possible in C
#include <stdio.h>
struct Record {
    int x = 7;  # Compiler Error
};
int main()
{
    struct Record s;
    printf("%d", s.x);
    return 0;
}
```

```cpp
// CPP program to initialize data member in c++
#include <iostream>
using namespace std;
struct Record {
    int x = 7;
};
int main()
{
    Record s;
    cout << s.x << endl;
    return 0;
}
```

 3. 使用struct关键字：在C中，必须使用struct关键字声明一个结构体变量；在C++中，struct关键字并不是必须的。
 4. 静态成员：C中不能有静态成员，但C++中是可以的。
```c
// C program with structure static member
struct Record {
    static int x;
};
/* 6:5: error: expected specifier-qualifier-list
   before 'static'
     static int x;
     ^*/
```
```cpp
// C++ program with structure static member
struct Record {
    static int x;
};
```
 5. 结构体中的Constructor creation：在C的结构体中不能有constructor，但是C++ 中可以有。

```cpp
// CPP program to initialize data member in c++
#include <iostream>
using namespace std;
struct Student {
    int roll;
    Student(int x)
    {
        roll = x;
    }
};
int main() // Driver Program
{
    struct Student s(2);
    cout << s.roll;
    return 0;
}
```
 6. sizeof操作：在C中对一个空的结构体执行`sizeof`将返回**0**，在C++中则是**1**.

```c
// empty structure
struct Record {
};
```
 7. 数据隐藏: C中的结构体不允许数据隐藏的概念，但是C\++中却允许；因为C\++是一个面向对象的语言而C并不是。
 8. 访问修饰符Access Modifiers：C结构体不支持访问修饰符, C++语言中内置了结构体对访问修饰符的支持。

 # typedef struct VS struct definitions

 1.如果使用typedef来定义结构体时：型如typedef struct aaa { ..}bbb;
 其中aaa是可以省略的，那么用bbb（如果有的话）来定义一个结构体变量时，可以直接用bbb xxx;就行。但用aaa来定义一个结构体变量时，则需要使用struct aaa xxx;
 2.不使用typedef来定义结构体时，声明该类型变量都需要加上struct，即struct aaa xxx;

# 结构体的实例化malloc() vs new

https://www.quora.com/Is-it-necessary-to-use-malloc-for-creating-a-structure-pointer-variable-What-happens-if-I-just-declare-struct-variable-*ptr-instead-of-struct-variable-*ptr-struct-variable-*-malloc-sizeof-struct-variable-and-try-to-access-the-structure-members

为了更方便地理解我们以单链表节点为例定义一个结构体：
```c
struct variable
{
      int data;
      struct variable *next;
};
```
